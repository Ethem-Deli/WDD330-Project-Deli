<header class="site-header">
    <link rel="stylesheet" href="./src/css/styles.css">
    <div class="container header-inner">
        <a class="logo" href="./index.html" aria-label="Home">
            <img src="../src/assets/logo.png" alt="History Timeline logo" class="logo-img" />
            <span class="logo-text">History Timeline â€” Interactive World History</span>
        </a>

        <div class="header-controls">
            <form id="search-form" class="header-search" role="search" onsubmit="return false;">
                <input id="globalSearch" class="search-input" type="search"
                    placeholder="Search events, people, places or years..." aria-label="Search events">
                <button id="searchBtn" class="search-btn" type="button" aria-label="Search">ðŸ”Ž</button>
            </form>

            <nav class="main-nav" aria-label="Main navigation">
                <a href="../index.html">Timeline</a>
                <a href="../favorites.html" id="favorites-link">My Timeline (Favorites)</a>
                <a href="../about.html">About</a>
                <a href="../auth/login.html" id="authLink">Login</a>

            </nav>

            <!-- <div class="auth-controls" id="auth-controls">
                <button id="loginBtn" class="btn small">Login</button>
                <button id="signupBtn" class="btn small">Sign up</button>
            </div> -->
        </div>
    </div>
</header>
<script type="module">
    import { auth, logoutUser, observeAuthState } from "../auth/auth.js";

    const authLink = document.getElementById("authLink");

    observeAuthState(user => {
        if (user) {
            authLink.textContent = "Logout";
            authLink.href = "#";
            authLink.addEventListener("click", async (e) => {
                e.preventDefault();
                await logoutUser();
                window.location.href = "../index.html";
            });
        } else {
            authLink.textContent = "Login";
            authLink.href = "../auth/login.html";
        }
    });
</script>